<!DOCTYPE html>

<html>
  <head>
    <%- partial('header_partial') %>
    <link rel="stylesheet" href="css/connect.css" />
    <link rel="stylesheet" href="css/settings-api.css" />
    <link rel="stylesheet" href="css/settings-account.css" />
    <script src="common/js/jquery.jsonp-2.2.0.min.js"></script>
    <script src="common/js/jquery.validate.min.js"></script>
    <script src="js/hosted.js"></script>
    <script src="js/settings.js"></script>
    <script src="<%= dashboard.customHostedEndpoint %>"></script>
    <title>settings</title>
  </head>
  <body>
    <div id="Settings-Connections">
      <ul class="synclets-list">
        <% for (var i = 0; i < connectors.length; i++) { %>
          <% if (!connectors[i].repository.hasOwnProperty('hidden') || connectors[i].repository.hidden !== 'true') { %>
          <li class="featured hideable">
            <div class="synclet-logoname-container">
              <img class="synclet-logo" src="img/icons/32px/<%= connectors[i].name %>.png" />
              <span class="synclet-name"><%= connectors[i].repository.title %></span>
            </div>
            <% if (connectors[i].hasOwnProperty('authed')) { %>
             <input class="action-button disabled" value="Connected" />
            <% } else { %>
            <input class="oauthLink action-button" value="Connect"
               data-provider="<%=connectors[i].repository.handle%>"
               data-width="<%= connectors[i].repository.oauthSize.width %>"
               data-height="<%= connectors[i].repository.oauthSize.height %>" />
             <% } %>
             <% if (connectors[i].hasOwnProperty('username')) { %>
               <div class="synclet-username"><%= connectors[i].username %></div>
             <% } %>
             <% if (connectors[i].hasOwnProperty('authed')) { %>
               <span class="synclet-disconnect"><a class="disconnector" href="/deauth/<%= connectors[i].repository.handle %>">Disconnect</a></span>
              <% } %>
          </li>
          <% } %>
        <% } %>
      </ul>
    </div>

    <div id="Settings-Account">
      <form id="settings_account" action="#">
        <div id="settings_account_error"></div>
        <div id="settings_avatar">
          <p><img class="avatar" alt="your avatar" src="<%= profileImage %>" />
          This is your current avatar</p>
          <input type="text" id="avi_url" name="avi_url" placeholder="Paste URL for new avatar" />
        </div>
        <div id="settings_name">
          <input type="text" id="username" name="username" placeholder="Name" />
        </div>
        <div>
          <input type="text" id="email" name="email" placeholder="Email address" />
        </div>
        <div id="settings_password">
          <div>
            <label for="old_password" id="old_password_label">Current password</label>
            <input type="password" id="old_password" name="old_password" />
          </div>
          <div>
            <label for="new_password" id="new_password_label">New password</label>
            <input type="password" id="new_password" name="new_password" />
          </div>
        </div>
        <div id="settings_analytics">
          <label for="optout" id="optout_label">Opt out of anonymous analytics?</label>
          <input type="checkbox" name="optout" id="optout" />
          <br />
        </div>
        <div id="settings_analytics_optedout" class="hidden">
          <p>You've opted out of participating in our anonymized analytics. There is no going back.</p>
        </div>
        <div id="save_that_sucker">
          <input class="action-button" id="save_button" type="submit" value="Save Changes">
        </div>
      </form>
    </div>

    <div id="Settings-Api">
      <div>
        <input type='text' id="apiToken" name='apiToken' value='' disabled='disabled' class='apiToken' />
      </div>
      <div class='apitokens-buttongroup'>
        <input type='button' id='showToken' name='showToken' value='Show API Token' class='showToken' />
        <input type='button' id='resetToken'name='resetToken' value='Reset API Token' class='resetToken' />
      </div>
    </div>
  </body>
</html>
